{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "data": {
      "url": "https://raw.githubusercontent.com/classicblue8/classicblue8.github.io/main/adatbazis.csv",
      "format": {"type": "csv"}
    },
    "params": [
      {
        "name": "selectedMetric",
        "value": "Consumption",
        "bind": {
          "input": "select",
          "options": [
            "Employment",
            "Consumption",
            "Production",
            "Cons_Capita",
            "Nr_Breweries",
            "Excise_Duty"
          ],
          "name": "Y Axis: "
        }
      },
      {
        "name": "highlightedCountry",
        "value": "RO",
        "bind": {
          "input": "select",
          "options": [
            "AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","NO","CH","GB"
          ],
          "name": "Highlight Country: "
        }
      }
    ],
    "transform": [
      {"calculate": "datum.id === highlightedCountry ? 1 : 0", "as": "highlight"},
      {"calculate": "datum[selectedMetric]", "as": "metricValue"}
    ],
    "mark": {"type": "line"},
    "encoding": {
      "x": {
        "field": "Year",
        "type": "ordinal",
        "title": "Year"
      },
      "y": {
        "field": "metricValue",
        "type": "quantitative",
        "title": {"signal": "selectedMetric"}
      },
      "color": {
        "field": "highlight",
        "type": "nominal",
        "scale": {"domain": [0, 1], "range": ["#CADCFC", "#ff5722"]},
        "legend": null
      },
      "detail": {
        "field": "id",
        "type": "nominal",
        "title": "Country"
      },
      "tooltip": [
        {"field": "id", "title": "Country"},
        {"field": "Year", "title": "Year"},
        {"field": "metricValue", "title": {"signal": "selectedMetric"}}
      ]
    },
    "title": {
      "text": "Line Chart of Selected Metric by Year",
      "subtitle": "Each line represents a different country",
      "subtitleFont": "Arial",
      "subtitleFontWeight": "lighter"
    },
    "width": 800,
    "height": 500,
    "config": {"view": {"stroke": "transparent"}}
  }
  